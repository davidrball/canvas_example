<!DOCTYPE html>
<html>
    <head>
        <!--<title>Image drawing</title>-->
        <!--<script type="text/javascript" src="draw.js"></script>-->
	<!-- not actually needed here, maybe include if we have any problems -->
    </head>
    <center><img id="html5" src="testing_distortion_truecolor.png" width="400"/ align="middle"></center>

    <div class ="blurb">
      <p> <font size = "20">
	Want to see what your face would look like if we put a black hole in front of it like in the image above?  Upload a selfie and find out!  Also check out our snapchat filter at SNAPCHAT FILTER DETAILS</font>
      </p>
    </div>




<!--<label>Image File:</label><br/>-->

<input type="file" id="imageLoader" name="imageLoader"/>
<canvas id="imageCanvas"></canvas>
<canvas id="transformedCanvas"></canvas>
<script>
var imageLoader = document.getElementById('imageLoader');
    imageLoader.addEventListener('change', handleImage, false);


var canvas = document.getElementById('imageCanvas');
var ctx = canvas.getContext('2d');

var canvas2 = document.getElementById('transforedCanvas');
var ctx2 = canvas.getContext('2d');

function handleImage(e){
    var reader = new FileReader();
    reader.onload = function(event){
        var img = new Image();
        img.onload = function(){
            canvas.width = img.width; 
            canvas.height = img.height;
            ctx.drawImage(img,0,0);
            

            var imgData = ctx.getImageData(0,0,canvas.width, canvas.height);
            <!-- load original image data into array called imgData -->
	    var newimgData = ctx.createImageData(imgData); <!-- define new empty
	    <!-- perform some operation on image data, this example inverts colors-->
            var whalf = canvas.width/2;
	    var hhalf = canvas.height/2;
	    var radius = 100;
	    var i;

<!--
            for (i=0;i<imgData.data.length;i+=4){

		var myx = Math.floor(i/canvas.width);
                var myy = i % canvas.width;
	        if ((myx-whalf)*(myx-whalf)+(myy-hhalf)*(myy-hhalf)<radius*radius{
                newimgData.data[i]=0;
                newimgData.data[i+1]=0;
		newimgData.data[i+2]=0;
		newimgData.data[i+3]=0;	 
		}} else
 {
		newimgData.data[i]=imgData.data[i];
                newimgData.data[i+1]=imgData.data[i+1];
                newimgData.data[i+2]=imgData.data[i+2];
		newimgData.data[i+3]=imgData.data[i+3];					      
}
-->	  

		<!--
                newimgData.data[i]=255-imgData.data[i];
                newimgData.data[i + 1] = 255-imgData.data[i + 1];
		newimgData.data[i + 2] = 255-imgData.data[i + 2];
		newimgData.data[i + 3] = 255;	
		-->

		
						 
            canvas2.width = img.width;
            canvas2.height = img.height;
            ctx2.putImageData(newimgData,0,0);

            <!--ctx2.drawImage(img,0,0);-->
            
        }
        img.src = event.target.result;
    }
    reader.readAsDataURL(e.target.files[0]);     
}




</html>
